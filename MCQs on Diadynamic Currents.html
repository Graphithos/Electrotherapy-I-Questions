<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQs on Electrotherapy 1 Lecture No.7 Quiz</title>
    <style>
        :root {
            --bg-color: #f5f7fa;
            --container-bg: white;
            --text-color: #333;
            --border-color: #ddd;
            --primary-color: #3498db;
            --header-color: #2c3e50;
            --secondary-text: #7f8c8d;
            --progress-bg: #ecf0f1;
            --question-bg: #f8f9fa;
            --option-bg: #fff;
            --option-hover: #f1f8ff;
            --option-selected: #d1ecf1;
            --correct-bg: #d4edda;
            --correct-border: #28a745;
            --incorrect-bg: #f8d7da;
            --incorrect-border: #dc3545;
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --button-disabled: #bdc3c7;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #ecf0f1;
            --toggle-slider: white;
            --toggle-text: #7f8c8d;
        }

        .dark-mode {
            --bg-color: #1a1a2e;
            --container-bg: #16213e;
            --text-color: #e6e6e6;
            --border-color: #394867;
            --primary-color: #4cc9f0;
            --header-color: #e6e6e6;
            --secondary-text: #a9a9a9;
            --progress-bg: #394867;
            --question-bg: #1f4068;
            --option-bg: #16213e;
            --option-hover: #1f4068;
            --option-selected: #1f4068;
            --correct-bg: #2d5a2d;
            --correct-border: #4caf50;
            --incorrect-bg: #5a2d2d;
            --incorrect-border: #f44336;
            --button-bg: #4cc9f0;
            --button-hover: #3aa8d0;
            --button-disabled: #5d6d7e;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #394867;
            --toggle-slider: #4cc9f0;
            --toggle-text: #e6e6e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }
        h1 {
            color: var(--header-color);
            margin-bottom: 5px;
            font-size: 24px;
            transition: color 0.3s;
        }
        .author {
            color: var(--secondary-text);
            font-style: italic;
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .description {
            color: var(--secondary-text);
            margin-bottom: 20px;
            transition: color 0.3s;
        }
        .theme-toggle {
            position: absolute;
            top: 35px; /* Adjusted to align with author name */
            right: 0;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-bg);
            transition: .4s;
            border-radius: 34px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
            color: var(--toggle-text);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 60px;
            left: 4px;
            bottom: 4px;
            background-color: var(--toggle-slider);
            transition: .4s;
            border-radius: 34px;
            z-index: 1;
        }
        .slider-text {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .light-text, .dark-text {
            transition: opacity 0.3s;
        }
        .dark-mode .light-text {
            opacity: 0.5;
        }
        .light-text {
            opacity: 0.5;
        }
        .dark-mode .dark-text {
            opacity: 1;
        }
        .dark-text {
            opacity: 0.5;
        }
        input:checked + .slider:before {
            transform: translateX(52px);
        }
        .progress-container {
            background: var(--progress-bg);
            border-radius: 5px;
            margin-bottom: 20px;
            position: relative;
            height: 10px;
            transition: background-color 0.3s;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--header-color);
            transition: color 0.3s;
        }
        .question {
            background: var(--question-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }
        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .question-text {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            display: grid;
            grid-gap: 10px;
        }
        .option {
            padding: 12px 15px;
            background: var(--option-bg);
            border: 2px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: var(--option-hover);
            border-color: var(--primary-color);
        }
        .option.selected {
            background: var(--option-selected);
            border-color: var(--primary-color);
        }
        .option.correct {
            background: var(--correct-bg);
            border-color: var(--correct-border);
        }
        .option.incorrect {
            background: var(--incorrect-bg);
            border-color: var(--incorrect-border);
        }
        .feedback {
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        .feedback.correct {
            background: var(--correct-bg);
            color: var(--text-color);
            border: 1px solid var(--correct-border);
            display: block;
        }
        .feedback.incorrect {
            background: var(--incorrect-bg);
            color: var(--text-color);
            border: 1px solid var(--incorrect-border);
            display: block;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            background: var(--button-bg);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: var(--button-hover);
        }
        button:disabled {
            background: var(--button-disabled);
            cursor: not-allowed;
        }
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }
        .score {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--header-color);
        }
        .score-value {
            font-size: 48px;
            color: var(--primary-color);
            font-weight: bold;
        }
        .restart-btn {
            margin-top: 20px;
            background: var(--restart-bg);
        }
        .restart-btn:hover {
            background: var(--restart-hover);
        }
        .review-btn {
            margin-top: 20px;
            background: var(--review-bg);
        }
        .review-btn:hover {
            background: var(--review-hover);
        }
        .review-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--question-bg);
            border-radius: 8px;
            display: none;
        }
        .review-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--header-color);
            text-align: center;
        }
        .review-question {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 4px solid var(--incorrect-border);
            background: var(--container-bg);
            border-radius: 4px;
        }
        .review-question-number {
            font-weight: bold;
            color: var(--incorrect-border);
            margin-bottom: 8px;
        }
        .review-question-text {
            margin-bottom: 10px;
        }
        .review-answer {
            margin-top: 8px;
            font-weight: bold;
        }
        .review-correct {
            color: var(--correct-border);
        }
        .review-explanation {
            margin-top: 5px;
            font-style: italic;
            color: var(--secondary-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MCQs on Electrotherapy 1 Lecture No.7 Quiz</h1>
            <p class="author">Dr. Samy Salem</p>
            <p class="description">Test your knowledge of Electrotherapy 1 (Diadynamic Current)</p>
            <div class="theme-toggle">
                <label class="switch">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider">
                        <div class="slider-text">
                            <span class="light-text">Light</span>
                            <span class="dark-text">Dark</span>
                        </div>
                    </span>
                </label>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="stats">
            <div>Question: <span id="current-question">1</span>/<span id="total-questions">30</span></div>
            <div>Score: <span id="score">0</span>/<span id="total-score">30</span></div>
        </div>

        <div id="quiz-container">
            <!-- Questions will be inserted here by JavaScript -->
        </div>

        <div class="navigation">
            <button id="prev-btn" disabled>Previous</button>
            <button id="next-btn">Next</button>
        </div>

        <div id="results" class="results">
            <div class="score">Your Score: <span class="score-value" id="final-score">0</span>/30</div>
            <p id="performance-message"></p>
            <button class="restart-btn" id="restart-btn">Restart Quiz</button>
            <button class="review-btn" id="review-btn">Review Incorrect Answers</button>
        </div>

        <div id="review-section" class="review-section">
            <h2 class="review-title">Questions Answered Incorrectly</h2>
            <div id="incorrect-questions-list"></div>
        </div>
    </div>

    <script>
        // Quiz data (all 30 questions from the PDF)
        const quizData = [
            {
                question: "What is the basic principle of diadynamic current?",
                options: [
                    "Modulation of a symmetrical biphasic sinusoidal waveform",
                    "Use of high-frequency alternating current",
                    "Application of pure direct current",
                    "Interference of two medium-frequency currents"
                ],
                answer: 0,
                explanation: "Modulation of a symmetrical biphasic sinusoidal waveform (Page 4)"
            },
            {
                question: "What is the carrier frequency range of diadynamic current?",
                options: [
                    "1-10 Hz",
                    "50-60 Hz",
                    "100-1000 Hz",
                    "1000-10000 Hz"
                ],
                answer: 1,
                explanation: "50-60 Hz (Page 4)"
            },
            {
                question: "Diadynamic waves are characterized as:",
                options: [
                    "Monophasic sinusoidal currents",
                    "Biphasic square waves",
                    "Balanced alternating currents",
                    "Interferential currents"
                ],
                answer: 0,
                explanation: "Monophasic sinusoidal currents (Page 4)"
            },
            {
                question: "Why is diadynamic current considered more painful than some other electrotherapy modalities?",
                options: [
                    "Due to its high frequency",
                    "Because of its extremely long pulse duration (6-10 msec)",
                    "Due to its low intensity",
                    "Because it uses alternating current"
                ],
                answer: 1,
                explanation: "Because of its extremely long pulse duration (6-10 msec) (Page 4)"
            },
            {
                question: "Diadynamic currents are technically described as:",
                options: [
                    "Half or full wave rectified sinusoidal currents",
                    "Pure alternating currents",
                    "Direct currents with high voltage",
                    "Interferential currents with beat frequency"
                ],
                answer: 0,
                explanation: "Half or full wave rectified sinusoidal currents (Page 4)"
            },
            {
                question: "How many classic types of diadynamic current are there?",
                options: [
                    "3",
                    "5",
                    "7",
                    "10"
                ],
                answer: 1,
                explanation: "5 (Page 8)"
            },
            {
                question: "Which diadynamic current type is a half wave rectified alternating current with frequency of 50 Hz?",
                options: [
                    "DF (diphase Fixe)",
                    "CP (Courtes Periodes)",
                    "LP (Longues Periodes)",
                    "MF (monophase Fixe)"
                ],
                answer: 3,
                explanation: "MF (monophase Fixe) (Page 9)"
            },
            {
                question: "What sensation does a patient typically feel with MF (monophase Fixe) current?",
                options: [
                    "Tickling sensation",
                    "Strong vibration sensation",
                    "No sensation",
                    "Burning sensation"
                ],
                answer: 1,
                explanation: "Strong vibration sensation (Page 9)"
            },
            {
                question: "Which current type is a full wave rectified alternating current with frequency of 100 Hz?",
                options: [
                    "RS (Syncopal Rhythm)",
                    "MF (monophase Fixe)",
                    "DF (diphase Fixe)",
                    "LP (Longues Periodes)"
                ],
                answer: 2,
                explanation: "DF (diphase Fixe) (Page 11)"
            },
            {
                question: "What type of sensation does DF current produce at therapeutic intensities?",
                options: [
                    "Strong vibration",
                    "Burning pain",
                    "Tickling sensation",
                    "No sensation"
                ],
                answer: 2,
                explanation: "Tickling sensation (Page 11)"
            },
            {
                question: "CP (Courtes Periodes) involves rapid alternation between:",
                options: [
                    "MF and RS",
                    "DF and LP",
                    "One second of MF and one second of DF",
                    "Ten seconds of MF and five seconds of DF"
                ],
                answer: 2,
                explanation: "One second of MF and one second of DF (Page 13)"
            },
            {
                question: "LP (Longues Periodes) involves slow alternation between:",
                options: [
                    "10 seconds MF followed by 5 seconds DF",
                    "5 seconds MF followed by 10 seconds DF",
                    "1 second MF and 1 second rest",
                    "1 second DF and 1 second MF"
                ],
                answer: 0,
                explanation: "10 seconds MF followed by 5 seconds DF (Page 14)"
            },
            {
                question: "What is the primary purpose of using CP and LP currents?",
                options: [
                    "To increase muscle strength",
                    "To prevent accommodation",
                    "To reduce treatment time",
                    "To increase current intensity"
                ],
                answer: 1,
                explanation: "To prevent accommodation (Page 15)"
            },
            {
                question: "RS (Syncopal Rhythm) comprises:",
                options: [
                    "1-second phase of MF followed by 1-second rest phase",
                    "1-second phase of DF followed by 1-second rest phase",
                    "Continuous MF current",
                    "Alternating DF and MF every second"
                ],
                answer: 0,
                explanation: "1-second phase of MF followed by 1-second rest phase (Page 16)"
            },
            {
                question: "Which current type is specifically used for testing nerve excitability?",
                options: [
                    "DF",
                    "MF",
                    "CP",
                    "RS"
                ],
                answer: 3,
                explanation: "RS (Page 16)"
            },
            {
                question: "What is the direct mechanism of pain relief with diadynamic current?",
                options: [
                    "Stimulation of pain gate mechanism",
                    "Heating of tissues",
                    "Chemical alteration of neurotransmitters",
                    "Destruction of pain fibers"
                ],
                answer: 0,
                explanation: "Stimulation of pain gate mechanism (Page 17)"
            },
            {
                question: "What is the indirect mechanism of pain relief with diadynamic current?",
                options: [
                    "Improved circulation and removal of irritant wastes",
                    "Direct nerve blockade",
                    "Anesthetic effect",
                    "Psychological distraction"
                ],
                answer: 0,
                explanation: "Improved circulation and removal of irritant wastes (Page 17)"
            },
            {
                question: "How does diadynamic current increase local circulation?",
                options: [
                    "By altering autonomic activity causing vasodilation",
                    "By directly heating the blood vessels",
                    "By increasing heart rate",
                    "By constricting superficial vessels"
                ],
                answer: 0,
                explanation: "By altering autonomic activity causing vasodilation (Page 18)"
            },
            {
                question: "What significant risk is associated with diadynamic current due to its high DC amplitude?",
                options: [
                    "Cardiac arrhythmia",
                    "Bone fractures",
                    "Internal bleeding",
                    "Skin damage from electrochemical changes"
                ],
                answer: 3,
                explanation: "Skin damage from electrochemical changes (Page 19)"
            },
            {
                question: "What is the maximum recommended treatment time for diadynamic current to minimize skin damage risk?",
                options: [
                    "5 minutes",
                    "10 minutes",
                    "20 minutes",
                    "30 minutes"
                ],
                answer: 1,
                explanation: "10 minutes (Page 19)"
            },
            {
                question: "Which of the following is NOT an indication for diadynamic current?",
                options: [
                    "Soft tissue injuries",
                    "Pain in small joints",
                    "Sudeck's atrophy",
                    "Open wounds"
                ],
                answer: 3,
                explanation: "Open wounds (Page 20, 21)"
            },
            {
                question: "For pain with muscle spasm, which current type is recommended?",
                options: [
                    "DF (diphase Fixe)",
                    "MF (monophase Fixe)",
                    "RS (Syncopal Rhythm)",
                    "LP (Longues Periodes)"
                ],
                answer: 0,
                explanation: "DF (diphase Fixe) (Page 23)"
            },
            {
                question: "For pain without muscle spasm, which current type is typically used?",
                options: [
                    "DF",
                    "MF",
                    "CP",
                    "RS"
                ],
                answer: 1,
                explanation: "MF (Page 23)"
            },
            {
                question: "For a 23-year-old patient with pain after leg trauma, which current type would be most appropriate?",
                options: [
                    "DF",
                    "MF",
                    "LP",
                    "CP"
                ],
                answer: 3,
                explanation: "CP (Page 25)"
            },
            {
                question: "In pain spot application, how are the electrodes typically placed?",
                options: [
                    "Anode over pain spot, cathode adjacent to it",
                    "Cathode over pain spot, anode adjacent to it",
                    "Both electrodes on opposite sides of the body",
                    "Both electrodes on the same muscle group"
                ],
                answer: 0,
                explanation: "Anode over pain spot, cathode adjacent to it (Page 24)"
            },
            {
                question: "What is the recommended maximum treatment duration for diadynamic current?",
                options: [
                    "Not more than 6 minutes",
                    "Not more than 12 minutes",
                    "Not more than 20 minutes",
                    "Not more than 30 minutes"
                ],
                answer: 1,
                explanation: "Not more than 12 minutes (Page 22)"
            },
            {
                question: "How long should each current type typically be applied during a treatment session?",
                options: [
                    "1 minute",
                    "3 minutes",
                    "5 minutes",
                    "10 minutes"
                ],
                answer: 1,
                explanation: "3 minutes (Page 22)"
            },
            {
                question: "What is the recommended treatment frequency for diadynamic current?",
                options: [
                    "Weekly",
                    "Twice weekly",
                    "Daily or every other day",
                    "Monthly"
                ],
                answer: 2,
                explanation: "Daily or every other day (Page 22)"
            },
            {
                question: "Which of the following is a contraindication for diadynamic current?",
                options: [
                    "Muscle weakness",
                    "Joint stiffness",
                    "Cardiac pacemakers",
                    "Mild arthritis"
                ],
                answer: 2,
                explanation: "Cardiac pacemakers (Page 21)"
            },
            {
                question: "How many treatment sessions are typically recommended for a course of diadynamic therapy?",
                options: [
                    "6 sessions",
                    "12 sessions",
                    "18 sessions",
                    "24 sessions"
                ],
                answer: 1,
                explanation: "12 sessions (Page 22)"
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let incorrectQuestions = [];

        // DOM elements
        const quizContainer = document.getElementById('quiz-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');
        const totalScoreEl = document.getElementById('total-score');
        const resultsContainer = document.getElementById('results');
        const finalScoreEl = document.getElementById('final-score');
        const performanceMessageEl = document.getElementById('performance-message');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const reviewSection = document.getElementById('review-section');
        const incorrectQuestionsList = document.getElementById('incorrect-questions-list');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const lightText = document.querySelector('.light-text');
        const darkText = document.querySelector('.dark-text');

        // Initialize quiz
        function initQuiz() {
            totalQuestionsEl.textContent = quizData.length;
            totalScoreEl.textContent = quizData.length;
            showQuestion();
            updateProgressBar();
            
            // Initialize dark mode based on system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
                updateToggleText(true);
            } else {
                updateToggleText(false);
            }
            
            // Event listeners
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            reviewBtn.addEventListener('click', showIncorrectQuestions);
            darkModeToggle.addEventListener('change', toggleDarkMode);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDarkMode = darkModeToggle.checked;
            document.body.classList.toggle('dark-mode', isDarkMode);
            updateToggleText(isDarkMode);
        }

        // Update toggle text opacity
        function updateToggleText(isDarkMode) {
            if (isDarkMode) {
                lightText.style.opacity = '0.5';
                darkText.style.opacity = '1';
            } else {
                lightText.style.opacity = '1';
                darkText.style.opacity = '0.5';
            }
        }

        // Show current question
        function showQuestion() {
            currentQuestionEl.textContent = currentQuestion + 1;
            scoreEl.textContent = score;
            
            const question = quizData[currentQuestion];
            let optionsHTML = '';
            
            question.options.forEach((option, index) => {
                let optionClass = 'option';
                if (userAnswers[currentQuestion] === index) {
                    optionClass += ' selected';
                    if (index === question.answer) {
                        optionClass += ' correct';
                    } else {
                        optionClass += ' incorrect';
                    }
                }
                
                optionsHTML += `
                    <div class="${optionClass}" data-index="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </div>
                `;
            });
            
            let feedbackHTML = '';
            if (userAnswers[currentQuestion] !== null) {
                const isCorrect = userAnswers[currentQuestion] === question.answer;
                feedbackHTML = `
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                        ${isCorrect ? '✓ Correct!' : '✗ Incorrect!'} 
                        ${!isCorrect ? `Correct answer: ${String.fromCharCode(65 + question.answer)}) ${question.options[question.answer]}` : ''}
                        <br><br>Explanation: ${question.explanation}
                    </div>
                `;
            }
            
            quizContainer.innerHTML = `
                <div class="question">
                    <div class="question-number">Question ${currentQuestion + 1}/${quizData.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">${optionsHTML}</div>
                    ${feedbackHTML}
                </div>
            `;
            
            // Add event listeners to options
            const optionElements = quizContainer.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === quizData.length - 1 ? 'Finish Quiz' : 'Next';
        }

        // Select an option
        function selectOption(e) {
            if (userAnswers[currentQuestion] !== null) return; // Already answered
            
            const selectedOption = e.currentTarget;
            const selectedIndex = parseInt(selectedOption.dataset.index);
            
            userAnswers[currentQuestion] = selectedIndex;
            
            // Check if answer is correct
            if (selectedIndex === quizData[currentQuestion].answer) {
                score++;
                scoreEl.textContent = score;
            } else {
                // Add to incorrect questions list
                incorrectQuestions.push({
                    question: quizData[currentQuestion].question,
                    userAnswer: selectedIndex,
                    correctAnswer: quizData[currentQuestion].answer,
                    options: quizData[currentQuestion].options,
                    explanation: quizData[currentQuestion].explanation,
                    questionNumber: currentQuestion + 1
                });
            }
            
            showQuestion();
            updateProgressBar();
        }

        // Show next question
        function showNextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show results
        function showResults() {
            quizContainer.style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.stats').style.display = 'none';
            
            finalScoreEl.textContent = score;
            
            // Performance message
            const percentage = (score / quizData.length) * 100;
            let message = '';
            if (percentage >= 80) {
                message = 'Excellent! You have a strong understanding of Electrotherapy 1 (Diadynamic Current).';
            } else if (percentage >= 60) {
                message = 'Good job! You have a solid grasp of the material.';
            } else if (percentage >= 40) {
                message = 'Not bad! Review the material and try again.';
            } else {
                message = 'Keep studying! Review the lectures and try again.';
            }
            
            performanceMessageEl.textContent = message;
            resultsContainer.style.display = 'block';
            
            // Show review button only if there are incorrect answers
            if (incorrectQuestions.length > 0) {
                reviewBtn.style.display = 'inline-block';
            } else {
                reviewBtn.style.display = 'none';
            }
        }

        // Show incorrect questions
        function showIncorrectQuestions() {
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'block';
            
            let incorrectHTML = '';
            incorrectQuestions.forEach((item, index) => {
                incorrectHTML += `
                    <div class="review-question">
                        <div class="review-question-number">Question ${item.questionNumber}</div>
                        <div class="review-question-text">${item.question}</div>
                        <div>Your answer: ${String.fromCharCode(65 + item.userAnswer)}) ${item.options[item.userAnswer]}</div>
                        <div class="review-answer review-correct">Correct answer: ${String.fromCharCode(65 + item.correctAnswer)}) ${item.options[item.correctAnswer]}</div>
                        <div class="review-explanation">${item.explanation}</div>
                    </div>
                `;
            });
            
            incorrectQuestionsList.innerHTML = incorrectHTML;
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            incorrectQuestions = [];
            
            quizContainer.style.display = 'block';
            document.querySelector('.navigation').style.display = 'flex';
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.stats').style.display = 'flex';
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'none';
            
            showQuestion();
            updateProgressBar();
        }

        // Initialize the quiz when the page loads
        window.onload = initQuiz;
    </script>
</body>
</html>
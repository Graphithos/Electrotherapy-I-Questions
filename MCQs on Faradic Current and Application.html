<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQs on Electrotherapy Lecture No. 4 Quiz</title>
    <style>
        :root {
            --bg-color: #f5f7fa;
            --container-bg: white;
            --text-color: #333;
            --border-color: #ddd;
            --primary-color: #3498db;
            --header-color: #2c3e50;
            --secondary-text: #7f8c8d;
            --progress-bg: #ecf0f1;
            --question-bg: #f8f9fa;
            --option-bg: #fff;
            --option-hover: #f1f8ff;
            --option-selected: #d1ecf1;
            --correct-bg: #d4edda;
            --correct-border: #28a745;
            --incorrect-bg: #f8d7da;
            --incorrect-border: #dc3545;
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --button-disabled: #bdc3c7;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #ecf0f1;
            --toggle-slider: white;
            --toggle-text: #7f8c8d;
        }

        .dark-mode {
            --bg-color: #1a1a2e;
            --container-bg: #16213e;
            --text-color: #e6e6e6;
            --border-color: #394867;
            --primary-color: #4cc9f0;
            --header-color: #e6e6e6;
            --secondary-text: #a9a9a9;
            --progress-bg: #394867;
            --question-bg: #1f4068;
            --option-bg: #16213e;
            --option-hover: #1f4068;
            --option-selected: #1f4068;
            --correct-bg: #2d5a2d;
            --correct-border: #4caf50;
            --incorrect-bg: #5a2d2d;
            --incorrect-border: #f44336;
            --button-bg: #4cc9f0;
            --button-hover: #3aa8d0;
            --button-disabled: #5d6d7e;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #394867;
            --toggle-slider: #4cc9f0;
            --toggle-text: #e6e6e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }
        h1 {
            color: var(--header-color);
            margin-bottom: 5px;
            font-size: 24px;
            transition: color 0.3s;
        }
        .author {
            color: var(--secondary-text);
            font-style: italic;
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .description {
            color: var(--secondary-text);
            margin-bottom: 20px;
            transition: color 0.3s;
        }
        .theme-toggle {
            position: absolute;
            top: 35px; /* Adjusted to align with author name */
            right: 0;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-bg);
            transition: .4s;
            border-radius: 34px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
            color: var(--toggle-text);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 60px;
            left: 4px;
            bottom: 4px;
            background-color: var(--toggle-slider);
            transition: .4s;
            border-radius: 34px;
            z-index: 1;
        }
        .slider-text {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .light-text, .dark-text {
            transition: opacity 0.3s;
        }
        .dark-mode .light-text {
            opacity: 0.5;
        }
        .light-text {
            opacity: 0.5;
        }
        .dark-mode .dark-text {
            opacity: 1;
        }
        .dark-text {
            opacity: 0.5;
        }
        input:checked + .slider:before {
            transform: translateX(52px);
        }
        .progress-container {
            background: var(--progress-bg);
            border-radius: 5px;
            margin-bottom: 20px;
            position: relative;
            height: 10px;
            transition: background-color 0.3s;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--header-color);
            transition: color 0.3s;
        }
        .question {
            background: var(--question-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }
        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .question-text {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            display: grid;
            grid-gap: 10px;
        }
        .option {
            padding: 12px 15px;
            background: var(--option-bg);
            border: 2px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: var(--option-hover);
            border-color: var(--primary-color);
        }
        .option.selected {
            background: var(--option-selected);
            border-color: var(--primary-color);
        }
        .option.correct {
            background: var(--correct-bg);
            border-color: var(--correct-border);
        }
        .option.incorrect {
            background: var(--incorrect-bg);
            border-color: var(--incorrect-border);
        }
        .feedback {
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        .feedback.correct {
            background: var(--correct-bg);
            color: var(--text-color);
            border: 1px solid var(--correct-border);
            display: block;
        }
        .feedback.incorrect {
            background: var(--incorrect-bg);
            color: var(--text-color);
            border: 1px solid var(--incorrect-border);
            display: block;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            background: var(--button-bg);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: var(--button-hover);
        }
        button:disabled {
            background: var(--button-disabled);
            cursor: not-allowed;
        }
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }
        .score {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--header-color);
        }
        .score-value {
            font-size: 48px;
            color: var(--primary-color);
            font-weight: bold;
        }
        .restart-btn {
            margin-top: 20px;
            background: var(--restart-bg);
        }
        .restart-btn:hover {
            background: var(--restart-hover);
        }
        .review-btn {
            margin-top: 20px;
            background: var(--review-bg);
        }
        .review-btn:hover {
            background: var(--review-hover);
        }
        .review-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--question-bg);
            border-radius: 8px;
            display: none;
        }
        .review-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--header-color);
            text-align: center;
        }
        .review-question {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 4px solid var(--incorrect-border);
            background: var(--container-bg);
            border-radius: 4px;
        }
        .review-question-number {
            font-weight: bold;
            color: var(--incorrect-border);
            margin-bottom: 8px;
        }
        .review-question-text {
            margin-bottom: 10px;
        }
        .review-answer {
            margin-top: 8px;
            font-weight: bold;
        }
        .review-correct {
            color: var(--correct-border);
        }
        .review-explanation {
            margin-top: 5px;
            font-style: italic;
            color: var(--secondary-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MCQs on Electrotherapy Lecture No. 4 Quiz</h1>
            <p class="author">Dr. Samy Salem</p>
            <p class="description">Test your knowledge of Electrotherapy Lecture No. 4</p>
            <div class="theme-toggle">
                <label class="switch">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider">
                        <div class="slider-text">
                            <span class="light-text">Light</span>
                            <span class="dark-text">Dark</span>
                        </div>
                    </span>
                </label>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="stats">
            <div>Question: <span id="current-question">1</span>/<span id="total-questions">30</span></div>
            <div>Score: <span id="score">0</span>/<span id="total-score">30</span></div>
        </div>

        <div id="quiz-container">
            <!-- Questions will be inserted here by JavaScript -->
        </div>

        <div class="navigation">
            <button id="prev-btn" disabled>Previous</button>
            <button id="next-btn">Next</button>
        </div>

        <div id="results" class="results">
            <div class="score">Your Score: <span class="score-value" id="final-score">0</span>/30</div>
            <p id="performance-message"></p>
            <button class="restart-btn" id="restart-btn">Restart Quiz</button>
            <button class="review-btn" id="review-btn">Review Incorrect Answers</button>
        </div>

        <div id="review-section" class="review-section">
            <h2 class="review-title">Questions Answered Incorrectly</h2>
            <div id="incorrect-questions-list"></div>
        </div>
    </div>

    <script>
        // Quiz data (all 30 questions from the PDF)
        const quizData = [
            {
                question: "What is the typical pulse duration range for a Faradic current?",
                options: [
                    "1 to 10 ms",
                    "0.1 to 1 ms",
                    "10 to 100 ms",
                    "1 to 5 ms"
                ],
                answer: 1,
                explanation: "0.1 to 1 ms (Page 3)"
            },
            {
                question: "What is the typical frequency range for a Faradic current?",
                options: [
                    "10 to 30 Hz",
                    "30 to 100 Hz",
                    "100 to 150 Hz",
                    "150 to 200 Hz"
                ],
                answer: 1,
                explanation: "30 to 100 Hz (Page 3)"
            },
            {
                question: "Which of the following best describes the waveform of a Faradic current?",
                options: [
                    "Symmetrical and balanced",
                    "Monophasic and direct",
                    "Biphasic, asymmetrical, and unbalanced",
                    "Sinusoidal and alternating"
                ],
                answer: 2,
                explanation: "Biphasic, asymmetrical, and unbalanced (Page 6)"
            },
            {
                question: "Which portion of the Faradic current waveform is characterized by being short duration, high amplitude, and spiked?",
                options: [
                    "The negative portion",
                    "The curved portion",
                    "The positive portion",
                    "The long duration portion"
                ],
                answer: 2,
                explanation: "The positive portion (Page 6)"
            },
            {
                question: "Why are Faradic currents always surged for treatment purposes?",
                options: [
                    "To minimize patient discomfort",
                    "To produce a near normal tetanic-like contraction and relaxation",
                    "To reduce the risk of electric shock",
                    "To generate a constant, unvarying muscle twitch"
                ],
                answer: 1,
                explanation: "To produce a near normal tetanic-like contraction and relaxation (Page 7)"
            },
            {
                question: "What does 'current surging' mean in the context of Faradic current application?",
                options: [
                    "The gradual increase and decrease of the peak intensity",
                    "The sudden interruption of current flow",
                    "A constant, high-frequency output",
                    "The change from biphasic to monophasic waveform"
                ],
                answer: 0,
                explanation: "The gradual increase and decrease of the peak intensity (Page 7)"
            },
            {
                question: "Which type of Faradic surging is described as impulses increasing slowly, being maintained, and then decreasing gradually?",
                options: [
                    "Triangular Surging",
                    "Saw-tooth Surging",
                    "Trapezoidal Surging",
                    "Rectangular Surging"
                ],
                answer: 2,
                explanation: "Trapezoidal Surging (Page 8)"
            },
            {
                question: "In which type of surging do impulses increase and decrease gradually?",
                options: [
                    "Rectangular Surging",
                    "Trapezoidal Surging",
                    "Triangular Surging",
                    "Saw-tooth Surging"
                ],
                answer: 2,
                explanation: "Triangular Surging (Page 9)"
            },
            {
                question: "A Faradic waveform where impulses increase gradually but suddenly fall is known as:",
                options: [
                    "Rectangular Surging",
                    "Trapezoidal Surging",
                    "Triangular Surging",
                    "Saw-tooth Surging"
                ],
                answer: 3,
                explanation: "Saw-tooth Surging (Page 9)"
            },
            {
                question: "Which surging type involves impulses increasing rapidly, being maintained for some time, and then falling suddenly?",
                options: [
                    "Saw-tooth Surging",
                    "Triangular Surging",
                    "Rectangular Surging",
                    "Trapezoidal Surging"
                ],
                answer: 2,
                explanation: "Rectangular Surging (Page 9)"
            },
            {
                question: "For which primary purpose is Faradic current used when muscle contraction is inhibited by pain?",
                options: [
                    "Muscle strengthening",
                    "Facilitation of muscle contraction",
                    "Loosening of adhesions",
                    "Pain modulation"
                ],
                answer: 1,
                explanation: "Facilitation of muscle contraction (Page 12)"
            },
            {
                question: "Why is muscle re-education with Faradic current important?",
                options: [
                    "To directly strengthen bone",
                    "To restore the sense of movement after prolonged disuse",
                    "To permanently replace voluntary contraction",
                    "To increase skin sensation"
                ],
                answer: 1,
                explanation: "To restore the sense of movement after prolonged disuse (Page 13)"
            },
            {
                question: "Faradic current is used for training a new muscle action after which procedure?",
                options: [
                    "Skin graft",
                    "Bone fracture",
                    "Cardiac pacemaker implantation",
                    "Tendon transplantation"
                ],
                answer: 3,
                explanation: "Tendon transplantation (Page 15)"
            },
            {
                question: "In cases of nerve damage, for how long after injury can muscle contraction typically be obtained with Faradic current?",
                options: [
                    "For several months",
                    "Only after complete nerve regeneration",
                    "For a few days",
                    "It is never effective for nerve damage"
                ],
                answer: 2,
                explanation: "For a few days (Page 16)"
            },
            {
                question: "Once the response to Faradic current begins to weaken after nerve damage, what should it be replaced with?",
                options: [
                    "Saw-tooth surged current",
                    "Modified direct current (galvanic)",
                    "Higher frequency Faradic current",
                    "Triangular surged current"
                ],
                answer: 1,
                explanation: "Modified direct current (galvanic) (Page 16)"
            },
            {
                question: "How does Faradic current help in the improvement of venous and lymphatic drainage?",
                options: [
                    "By heating the tissues",
                    "Through the pumping action of alternate muscle contraction and relaxation",
                    "By causing vasoconstriction",
                    "By directly stimulating lymph nodes"
                ],
                answer: 1,
                explanation: "Through the pumping action of alternate muscle contraction and relaxation (Page 17)"
            },
            {
                question: "How can Faradic current prevent and loosen adhesions?",
                options: [
                    "By keeping structures moving and stretching formed adhesions via muscle contraction",
                    "By melting the adhesions with heat",
                    "By applying a constant stretch to the joint",
                    "By numbing the area to allow for manual stretching"
                ],
                answer: 0,
                explanation: "By keeping structures moving and stretching formed adhesions via muscle contraction (Page 18)"
            },
            {
                question: "Which of the following is a therapeutic use of Faradic current?",
                options: [
                    "Lowering blood pressure",
                    "Reduction of edema",
                    "Increasing bone density",
                    "Treating skin infections"
                ],
                answer: 1,
                explanation: "Reduction of edema (Page 26)"
            },
            {
                question: "All of the following are contraindications for Faradic current EXCEPT:",
                options: [
                    "Skin lesions",
                    "Muscle weakness",
                    "Thrombosis",
                    "Loss of sensation"
                ],
                answer: 1,
                explanation: "Muscle weakness (Pages 20-21)"
            },
            {
                question: "Why is Faradic current contraindicated over areas with superficial metals?",
                options: [
                    "Metals will block the current entirely.",
                    "Metals will change the current to a direct current.",
                    "Metals will make the muscle contraction too strong.",
                    "Metals will concentrate the current and cause a burn."
                ],
                answer: 3,
                explanation: "Metals will concentrate the current and cause a burn. (Page 21)"
            },
            {
                question: "For a patient with a cardiac pacemaker, which areas should be avoided when applying Faradic current?",
                options: [
                    "Limbs only",
                    "Head and neck",
                    "Abdomen, thorax, and shoulder",
                    "Lower back and hips"
                ],
                answer: 2,
                explanation: "Abdomen, thorax, and shoulder (Page 21)"
            },
            {
                question: "If skin sensation is not normal, what is a recommended precaution regarding electrode placement?",
                options: [
                    "Do not use Faradic current at all.",
                    "Use the highest possible intensity to overcome the sensory deficit.",
                    "Position electrodes at an alternative site which ensures effective circulation.",
                    "Apply the electrodes directly over the numb area."
                ],
                answer: 2,
                explanation: "Position electrodes at an alternative site which ensures effective circulation. (Page 22)"
            },
            {
                question: "What is a specific precaution regarding the use of Faradic current on children?",
                options: [
                    "It should never be used on children.",
                    "Only use Saw-tooth surging.",
                    "Avoid active epiphysial regions.",
                    "Use a lower frequency than for adults."
                ],
                answer: 2,
                explanation: "Avoid active epiphysial regions. (Page 22)"
            },
            {
                question: "Inappropriate stimulation parameters may cause all of the following EXCEPT:",
                options: [
                    "Muscle strengthening",
                    "Muscle damage",
                    "Reduction in blood flow",
                    "Muscle fatigue"
                ],
                answer: 0,
                explanation: "Muscle strengthening (Page 23)"
            },
            {
                question: "Which of the following is a danger of Faradic current?",
                options: [
                    "Burns",
                    "Electric shock",
                    "Hypovolemic shock",
                    "All of the above"
                ],
                answer: 3,
                explanation: "All of the above (Page 25)"
            },
            {
                question: "How should the patient be positioned for the application of Faradic current?",
                options: [
                    "With the muscles to be stimulated in a lengthened position",
                    "With the muscles to be stimulated in a shortened position",
                    "In a position that is completely immobile",
                    "In a position that maximizes joint instability"
                ],
                answer: 1,
                explanation: "With the muscles to be stimulated in a shortened position (Page 28)"
            },
            {
                question: "Why should the treatment area be washed with hot water before electrode application?",
                options: [
                    "To sterilize the skin",
                    "To numb the area",
                    "To lower skin resistance by removing sebum and epithelial cells",
                    "To cause vasoconstriction"
                ],
                answer: 2,
                explanation: "To lower skin resistance by removing sebum and epithelial cells (Page 29)"
            },
            {
                question: "When stimulating a muscle group, where is the inactive electrode typically placed?",
                options: [
                    "On the muscle belly",
                    "On the nerve trunk",
                    "On a distal joint",
                    "On the contralateral limb"
                ],
                answer: 1,
                explanation: "On the nerve trunk (Page 30)"
            },
            {
                question: "For stimulating an individual muscle, which type of electrode is typically used?",
                options: [
                    "A pen electrode",
                    "A large rubber electrode",
                    "A carbon-impregnated electrode",
                    "A plate electrode"
                ],
                answer: 0,
                explanation: "A pen electrode (Page 30)"
            },
            {
                question: "In Group Muscle Stimulation, how are the electrodes typically managed?",
                options: [
                    "The active electrode is moved while the passive is stationary.",
                    "Both electrodes are moved continuously over the skin.",
                    "Both the active and passive electrodes are kept stationary.",
                    "Only a single pen electrode is used."
                ],
                answer: 2,
                explanation: "Both the active and passive electrodes are kept stationary. (Page 33)"
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let incorrectQuestions = [];

        // DOM elements
        const quizContainer = document.getElementById('quiz-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');
        const totalScoreEl = document.getElementById('total-score');
        const resultsContainer = document.getElementById('results');
        const finalScoreEl = document.getElementById('final-score');
        const performanceMessageEl = document.getElementById('performance-message');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const reviewSection = document.getElementById('review-section');
        const incorrectQuestionsList = document.getElementById('incorrect-questions-list');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const lightText = document.querySelector('.light-text');
        const darkText = document.querySelector('.dark-text');

        // Initialize quiz
        function initQuiz() {
            totalQuestionsEl.textContent = quizData.length;
            totalScoreEl.textContent = quizData.length;
            showQuestion();
            updateProgressBar();
            
            // Initialize dark mode based on system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
                updateToggleText(true);
            } else {
                updateToggleText(false);
            }
            
            // Event listeners
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            reviewBtn.addEventListener('click', showIncorrectQuestions);
            darkModeToggle.addEventListener('change', toggleDarkMode);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDarkMode = darkModeToggle.checked;
            document.body.classList.toggle('dark-mode', isDarkMode);
            updateToggleText(isDarkMode);
        }

        // Update toggle text opacity
        function updateToggleText(isDarkMode) {
            if (isDarkMode) {
                lightText.style.opacity = '0.5';
                darkText.style.opacity = '1';
            } else {
                lightText.style.opacity = '1';
                darkText.style.opacity = '0.5';
            }
        }

        // Show current question
        function showQuestion() {
            currentQuestionEl.textContent = currentQuestion + 1;
            scoreEl.textContent = score;
            
            const question = quizData[currentQuestion];
            let optionsHTML = '';
            
            question.options.forEach((option, index) => {
                let optionClass = 'option';
                if (userAnswers[currentQuestion] === index) {
                    optionClass += ' selected';
                    if (index === question.answer) {
                        optionClass += ' correct';
                    } else {
                        optionClass += ' incorrect';
                    }
                }
                
                optionsHTML += `
                    <div class="${optionClass}" data-index="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </div>
                `;
            });
            
            let feedbackHTML = '';
            if (userAnswers[currentQuestion] !== null) {
                const isCorrect = userAnswers[currentQuestion] === question.answer;
                feedbackHTML = `
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                        ${isCorrect ? '✓ Correct!' : '✗ Incorrect!'} 
                        ${!isCorrect ? `Correct answer: ${String.fromCharCode(65 + question.answer)}) ${question.options[question.answer]}` : ''}
                        <br><br>Explanation: ${question.explanation}
                    </div>
                `;
            }
            
            quizContainer.innerHTML = `
                <div class="question">
                    <div class="question-number">Question ${currentQuestion + 1}/${quizData.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">${optionsHTML}</div>
                    ${feedbackHTML}
                </div>
            `;
            
            // Add event listeners to options
            const optionElements = quizContainer.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === quizData.length - 1 ? 'Finish Quiz' : 'Next';
        }

        // Select an option
        function selectOption(e) {
            if (userAnswers[currentQuestion] !== null) return; // Already answered
            
            const selectedOption = e.currentTarget;
            const selectedIndex = parseInt(selectedOption.dataset.index);
            
            userAnswers[currentQuestion] = selectedIndex;
            
            // Check if answer is correct
            if (selectedIndex === quizData[currentQuestion].answer) {
                score++;
                scoreEl.textContent = score;
            } else {
                // Add to incorrect questions list
                incorrectQuestions.push({
                    question: quizData[currentQuestion].question,
                    userAnswer: selectedIndex,
                    correctAnswer: quizData[currentQuestion].answer,
                    options: quizData[currentQuestion].options,
                    explanation: quizData[currentQuestion].explanation,
                    questionNumber: currentQuestion + 1
                });
            }
            
            showQuestion();
            updateProgressBar();
        }

        // Show next question
        function showNextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show results
        function showResults() {
            quizContainer.style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.stats').style.display = 'none';
            
            finalScoreEl.textContent = score;
            
            // Performance message
            const percentage = (score / quizData.length) * 100;
            let message = '';
            if (percentage >= 80) {
                message = 'Excellent! You have a strong understanding of Electrotherapy Lecture No. 4.';
            } else if (percentage >= 60) {
                message = 'Good job! You have a solid grasp of the material.';
            } else if (percentage >= 40) {
                message = 'Not bad! Review the material and try again.';
            } else {
                message = 'Keep studying! Review the lectures and try again.';
            }
            
            performanceMessageEl.textContent = message;
            resultsContainer.style.display = 'block';
            
            // Show review button only if there are incorrect answers
            if (incorrectQuestions.length > 0) {
                reviewBtn.style.display = 'inline-block';
            } else {
                reviewBtn.style.display = 'none';
            }
        }

        // Show incorrect questions
        function showIncorrectQuestions() {
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'block';
            
            let incorrectHTML = '';
            incorrectQuestions.forEach((item, index) => {
                incorrectHTML += `
                    <div class="review-question">
                        <div class="review-question-number">Question ${item.questionNumber}</div>
                        <div class="review-question-text">${item.question}</div>
                        <div>Your answer: ${String.fromCharCode(65 + item.userAnswer)}) ${item.options[item.userAnswer]}</div>
                        <div class="review-answer review-correct">Correct answer: ${String.fromCharCode(65 + item.correctAnswer)}) ${item.options[item.correctAnswer]}</div>
                        <div class="review-explanation">${item.explanation}</div>
                    </div>
                `;
            });
            
            incorrectQuestionsList.innerHTML = incorrectHTML;
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            incorrectQuestions = [];
            
            quizContainer.style.display = 'block';
            document.querySelector('.navigation').style.display = 'flex';
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.stats').style.display = 'flex';
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'none';
            
            showQuestion();
            updateProgressBar();
        }

        // Initialize the quiz when the page loads
        window.addEventListener('load', initQuiz);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQs on Electrotherapy 1 Lecture No.5 Quiz</title>
    <style>
        :root {
            --bg-color: #f5f7fa;
            --container-bg: white;
            --text-color: #333;
            --border-color: #ddd;
            --primary-color: #3498db;
            --header-color: #2c3e50;
            --secondary-text: #7f8c8d;
            --progress-bg: #ecf0f1;
            --question-bg: #f8f9fa;
            --option-bg: #fff;
            --option-hover: #f1f8ff;
            --option-selected: #d1ecf1;
            --correct-bg: #d4edda;
            --correct-border: #28a745;
            --incorrect-bg: #f8d7da;
            --incorrect-border: #dc3545;
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --button-disabled: #bdc3c7;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #ecf0f1;
            --toggle-slider: white;
            --toggle-text: #7f8c8d;
        }

        .dark-mode {
            --bg-color: #1a1a2e;
            --container-bg: #16213e;
            --text-color: #e6e6e6;
            --border-color: #394867;
            --primary-color: #4cc9f0;
            --header-color: #e6e6e6;
            --secondary-text: #a9a9a9;
            --progress-bg: #394867;
            --question-bg: #1f4068;
            --option-bg: #16213e;
            --option-hover: #1f4068;
            --option-selected: #1f4068;
            --correct-bg: #2d5a2d;
            --correct-border: #4caf50;
            --incorrect-bg: #5a2d2d;
            --incorrect-border: #f44336;
            --button-bg: #4cc9f0;
            --button-hover: #3aa8d0;
            --button-disabled: #5d6d7e;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #394867;
            --toggle-slider: #4cc9f0;
            --toggle-text: #e6e6e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }
        h1 {
            color: var(--header-color);
            margin-bottom: 5px;
            font-size: 24px;
            transition: color 0.3s;
        }
        .author {
            color: var(--secondary-text);
            font-style: italic;
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .description {
            color: var(--secondary-text);
            margin-bottom: 20px;
            transition: color 0.3s;
        }
        .theme-toggle {
            position: absolute;
            top: 35px; /* Adjusted to align with author name */
            right: 0;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-bg);
            transition: .4s;
            border-radius: 34px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
            color: var(--toggle-text);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 60px;
            left: 4px;
            bottom: 4px;
            background-color: var(--toggle-slider);
            transition: .4s;
            border-radius: 34px;
            z-index: 1;
        }
        .slider-text {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .light-text, .dark-text {
            transition: opacity 0.3s;
        }
        .dark-mode .light-text {
            opacity: 0.5;
        }
        .light-text {
            opacity: 0.5;
        }
        .dark-mode .dark-text {
            opacity: 1;
        }
        .dark-text {
            opacity: 0.5;
        }
        input:checked + .slider:before {
            transform: translateX(52px);
        }
        .progress-container {
            background: var(--progress-bg);
            border-radius: 5px;
            margin-bottom: 20px;
            position: relative;
            height: 10px;
            transition: background-color 0.3s;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--header-color);
            transition: color 0.3s;
        }
        .question {
            background: var(--question-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }
        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .question-text {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            display: grid;
            grid-gap: 10px;
        }
        .option {
            padding: 12px 15px;
            background: var(--option-bg);
            border: 2px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: var(--option-hover);
            border-color: var(--primary-color);
        }
        .option.selected {
            background: var(--option-selected);
            border-color: var(--primary-color);
        }
        .option.correct {
            background: var(--correct-bg);
            border-color: var(--correct-border);
        }
        .option.incorrect {
            background: var(--incorrect-bg);
            border-color: var(--incorrect-border);
        }
        .feedback {
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        .feedback.correct {
            background: var(--correct-bg);
            color: var(--text-color);
            border: 1px solid var(--correct-border);
            display: block;
        }
        .feedback.incorrect {
            background: var(--incorrect-bg);
            color: var(--text-color);
            border: 1px solid var(--incorrect-border);
            display: block;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            background: var(--button-bg);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: var(--button-hover);
        }
        button:disabled {
            background: var(--button-disabled);
            cursor: not-allowed;
        }
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }
        .score {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--header-color);
        }
        .score-value {
            font-size: 48px;
            color: var(--primary-color);
            font-weight: bold;
        }
        .restart-btn {
            margin-top: 20px;
            background: var(--restart-bg);
        }
        .restart-btn:hover {
            background: var(--restart-hover);
        }
        .review-btn {
            margin-top: 20px;
            background: var(--review-bg);
        }
        .review-btn:hover {
            background: var(--review-hover);
        }
        .review-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--question-bg);
            border-radius: 8px;
            display: none;
        }
        .review-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--header-color);
            text-align: center;
        }
        .review-question {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 4px solid var(--incorrect-border);
            background: var(--container-bg);
            border-radius: 4px;
        }
        .review-question-number {
            font-weight: bold;
            color: var(--incorrect-border);
            margin-bottom: 8px;
        }
        .review-question-text {
            margin-bottom: 10px;
        }
        .review-answer {
            margin-top: 8px;
            font-weight: bold;
        }
        .review-correct {
            color: var(--correct-border);
        }
        .review-explanation {
            margin-top: 5px;
            font-style: italic;
            color: var(--secondary-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MCQs on Electrotherapy 1 Lecture No.5 Quiz</h1>
            <p class="author">Dr. Samy Salem</p>
            <p class="description">Test your knowledge of Electrotherapy 1 (Interferential Current)</p>
            <div class="theme-toggle">
                <label class="switch">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider">
                        <div class="slider-text">
                            <span class="light-text">Light</span>
                            <span class="dark-text">Dark</span>
                        </div>
                    </span>
                </label>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="stats">
            <div>Question: <span id="current-question">1</span>/<span id="total-questions">30</span></div>
            <div>Score: <span id="score">0</span>/<span id="total-score">30</span></div>
        </div>

        <div id="quiz-container">
            <!-- Questions will be inserted here by JavaScript -->
        </div>

        <div class="navigation">
            <button id="prev-btn" disabled>Previous</button>
            <button id="next-btn">Next</button>
        </div>

        <div id="results" class="results">
            <div class="score">Your Score: <span class="score-value" id="final-score">0</span>/30</div>
            <p id="performance-message"></p>
            <button class="restart-btn" id="restart-btn">Restart Quiz</button>
            <button class="review-btn" id="review-btn">Review Incorrect Answers</button>
        </div>

        <div id="review-section" class="review-section">
            <h2 class="review-title">Questions Answered Incorrectly</h2>
            <div id="incorrect-questions-list"></div>
        </div>
    </div>

    <script>
        // Quiz data (all 30 questions from the PDF)
        const quizData = [
            {
                question: "How is an Interferential Current (IFC) produced?",
                options: [
                    "Through the interference of two symmetrical, asynchronous kilohertz frequency alternating currents.",
                    "By modulating a single low-frequency current.",
                    "By converting a direct current into an alternating current.",
                    "By using a single high-frequency current with varying amplitude."
                ],
                answer: 0,
                explanation: "Through the interference of two symmetrical, asynchronous kilohertz frequency alternating currents. (Page 2)"
            },
            {
                question: "What is the typical frequency range for the carrier waves used in IFC?",
                options: [
                    "1 to 200 Hz",
                    "1 to 10 KHz",
                    "50 to 60 Hz",
                    "100 to 150 Hz"
                ],
                answer: 1,
                explanation: "1 to 10 KHz (Page 2)"
            },
            {
                question: "If a 4,000-Hz current and a 4,100-Hz current interfere, what is the resulting beat frequency?",
                options: [
                    "4,000 Hz",
                    "4,100 Hz",
                    "100 Hz",
                    "8,100 Hz"
                ],
                answer: 2,
                explanation: "100 Hz (Page 3)"
            },
            {
                question: "The physiological effects of Interferential Current are primarily based on which of the following?",
                options: [
                    "The carrier frequency",
                    "The beat frequency",
                    "The electrode size",
                    "The current intensity alone"
                ],
                answer: 1,
                explanation: "The beat frequency (Page 3)"
            },
            {
                question: "What is the primary purpose of using medium-frequency carrier waves in IFC?",
                options: [
                    "To directly stimulate muscle contractions",
                    "To provide a greater depth of penetration and produce the interferential current",
                    "To heat the superficial tissues",
                    "To block nerve conduction permanently"
                ],
                answer: 1,
                explanation: "To provide a greater depth of penetration and produce the interferential current (Page 4)"
            },
            {
                question: "In IFC terminology, what is the \"intrinsic\" or \"carrier frequency\" (f1)?",
                options: [
                    "The frequency set by the therapist",
                    "The frequency that results from the interference",
                    "The frequency that is pre-set on the machine",
                    "The frequency of the beat"
                ],
                answer: 2,
                explanation: "The frequency that is pre-set on the machine (Page 5)"
            },
            {
                question: "Why is it beneficial for the frequency f2 to \"swing\" within a range?",
                options: [
                    "To reduce the cost of the machine",
                    "To make the application simpler for the therapist",
                    "To increase the intensity of the carrier wave",
                    "To limit accommodation and habituation to the current"
                ],
                answer: 3,
                explanation: "To limit accommodation and habituation to the current (Page 5)"
            },
            {
                question: "How is the beat frequency (F) in IFC calculated?",
                options: [
                    "F = f1 + f2",
                    "F = f1 * f2",
                    "F = f2 - f1",
                    "F = f1 / f2"
                ],
                answer: 2,
                explanation: "F = f2 - f1 (Page 5)"
            },
            {
                question: "What is the typical range for the beat frequency in IFC?",
                options: [
                    "4000 to 4150 Hz",
                    "1 to 150 Hz",
                    "2000 to 6000 Hz",
                    "1 to 10 KHz"
                ],
                answer: 1,
                explanation: "1 to 150 Hz (Page 5)"
            },
            {
                question: "What is the shape of the static interference field in IFC?",
                options: [
                    "A clove leaf",
                    "A perfect circle",
                    "A straight line",
                    "A square"
                ],
                answer: 0,
                explanation: "A clove leaf (Page 6)"
            },
            {
                question: "Where is the area of static interference located relative to the electrodes?",
                options: [
                    "Directly under each electrode",
                    "At 45-degree angles to the perpendicular lines from each electrode",
                    "In a straight line between the two electrodes of a channel",
                    "Only at the skin surface"
                ],
                answer: 1,
                explanation: "At 45-degree angles to the perpendicular lines from each electrode (Page 6)"
            },
            {
                question: "What is Dynamic Interference also known as?",
                options: [
                    "Static vector",
                    "Carrier frequency modulation",
                    "Bipolar interference",
                    "Vector sweep or vector scan"
                ],
                answer: 3,
                explanation: "Vector sweep or vector scan (Page 7)"
            },
            {
                question: "What does a vector scan achieve in IFC?",
                options: [
                    "It decreases the penetration depth.",
                    "It converts quadripolar IFC to bipolar IFC.",
                    "It fixes the beat frequency at a constant value.",
                    "It moves the area of interference in a to-and-fro manner."
                ],
                answer: 3,
                explanation: "It moves the area of interference in a to-and-fro manner. (Page 7)"
            },
            {
                question: "How is the vector scan produced?",
                options: [
                    "By using only two electrodes",
                    "By varying the current intensity of one or both input currents",
                    "By turning the machine off and on",
                    "By using a direct current instead of an alternating current"
                ],
                answer: 1,
                explanation: "By varying the current intensity of one or both input currents (Page 19)"
            },
            {
                question: "How is premodulated (Bipolar) IFC created?",
                options: [
                    "By interference within the patient's tissues",
                    "By using four electrodes placed perpendicularly",
                    "By interference of two currents within the simulator device",
                    "By using a single low-frequency current"
                ],
                answer: 2,
                explanation: "By interference of two currents within the simulator device (Page 13)"
            },
            {
                question: "What is a key characteristic of the current applied to the patient in bipolar IFC?",
                options: [
                    "It is a single, premodulated current.",
                    "It consists of two unmodulated currents.",
                    "The interference happens within the tissues.",
                    "It requires electrodes to be placed perpendicularly."
                ],
                answer: 0,
                explanation: "It is a single, premodulated current. (Page 13)"
            },
            {
                question: "How should the two currents be directed in a quadripolar setup for effective interference?",
                options: [
                    "They should run parallel to each other.",
                    "They should intersect each other perpendicularly within the tissues.",
                    "They should be applied to opposite limbs.",
                    "They should not cross."
                ],
                answer: 1,
                explanation: "They should intersect each other perpendicularly within the tissues. (Page 16)"
            },
            {
                question: "What is the primary visual representation of the electrical field in quadripolar IFC?",
                options: [
                    "A clover-leaf pattern",
                    "A circular field",
                    "A straight line",
                    "A square block"
                ],
                answer: 0,
                explanation: "A clover-leaf pattern (Page 18)"
            },
            {
                question: "For electrode configuration in quadripolar IFC, how should the electrodes be placed?",
                options: [
                    "In a straight line along the muscle fibers.",
                    "Bilaterally in a square or rectangular manner so the currents cross.",
                    "Only on the proximal end of the muscle.",
                    "On the same side of the body."
                ],
                answer: 1,
                explanation: "Bilaterally in a square or rectangular manner so the currents cross. (Page 21)"
            },
            {
                question: "For bipolar IFC application, where are the electrodes typically placed?",
                options: [
                    "At the proximal and distal ends of the muscle.",
                    "In a criss-cross pattern over the joint.",
                    "Only over the painful point.",
                    "Perpendicular to the bone."
                ],
                answer: 0,
                explanation: "At the proximal and distal ends of the muscle. (Page 21)"
            },
            {
                question: "What is a primary clinical indication for using IFC?",
                options: [
                    "Bone fracture healing",
                    "Hair loss",
                    "Pain modulation",
                    "Increasing bone density"
                ],
                answer: 2,
                explanation: "Pain modulation (Page 11, 25)"
            },
            {
                question: "What is the typical treatment time for an IFC session?",
                options: [
                    "1 to 5 minutes",
                    "10 to 20 minutes",
                    "30 to 60 minutes",
                    "Over 60 minutes"
                ],
                answer: 1,
                explanation: "10 to 20 minutes (Page 25)"
            },
            {
                question: "Which of the following is NOT an indication for IFC?",
                options: [
                    "Acute pain",
                    "Chronic pain",
                    "Muscle spasm",
                    "Thrombophlebitis"
                ],
                answer: 3,
                explanation: "Thrombophlebitis (Page 25, 26)"
            },
            {
                question: "Which of the following is an absolute contraindication for IFC?",
                options: [
                    "Mild muscle soreness",
                    "Presence of a pacemaker",
                    "Clean, intact skin",
                    "Normal skin sensation"
                ],
                answer: 1,
                explanation: "Presence of a pacemaker (Page 26)"
            },
            {
                question: "Application of IFC is contraindicated over which of the following areas?",
                options: [
                    "The lumbar paraspinals",
                    "The quadriceps muscle",
                    "The gastrocnemius muscle",
                    "The eyes"
                ],
                answer: 3,
                explanation: "The eyes (Page 26)"
            },
            {
                question: "IFC is contraindicated for which type of pain?",
                options: [
                    "Post-traumatic pain",
                    "Pain from muscle spasm",
                    "Pain of central origin",
                    "Acute inflammatory pain"
                ],
                answer: 2,
                explanation: "Pain of central origin (Page 26)"
            },
            {
                question: "Which of the following is a precaution for IFC application?",
                options: [
                    "Malignant tumors.",
                    "Improper use can result in electrode burns or skin irritation.",
                    "Pregnancy.",
                    "Pain of unknown origin."
                ],
                answer: 1,
                explanation: "Improper use can result in electrode burns or skin irritation. (Page 27)"
            },
            {
                question: "What can intense or prolonged IFC stimulation result in?",
                options: [
                    "Muscle spasm and/or muscle soreness",
                    "Immediate healing",
                    "Increased hair growth",
                    "Improved cognitive function"
                ],
                answer: 0,
                explanation: "Muscle spasm and/or muscle soreness (Page 27)"
            },
            {
                question: "Before applying IFC, what must a clinician do regarding the patient's skin?",
                options: [
                    "Apply lotion to make it smooth.",
                    "Inspect it for any signs of abrasion or irritation.",
                    "Shave the entire limb.",
                    "Cool it with an ice pack."
                ],
                answer: 1,
                explanation: "Inspect it for any signs of abrasion or irritation. (Page 22)"
            },
            {
                question: "Why is it important to check electrodes and lead wires before application?",
                options: [
                    "To ensure they are the most expensive brand.",
                    "To see if they match the patient's clothing.",
                    "To make sure they are all the same color.",
                    "For continuity and to check for signs of excessive wear."
                ],
                answer: 3,
                explanation: "For continuity and to check for signs of excessive wear. (Page 23)"
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let incorrectQuestions = [];

        // DOM elements
        const quizContainer = document.getElementById('quiz-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');
        const totalScoreEl = document.getElementById('total-score');
        const resultsContainer = document.getElementById('results');
        const finalScoreEl = document.getElementById('final-score');
        const performanceMessageEl = document.getElementById('performance-message');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const reviewSection = document.getElementById('review-section');
        const incorrectQuestionsList = document.getElementById('incorrect-questions-list');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const lightText = document.querySelector('.light-text');
        const darkText = document.querySelector('.dark-text');

        // Initialize quiz
        function initQuiz() {
            totalQuestionsEl.textContent = quizData.length;
            totalScoreEl.textContent = quizData.length;
            showQuestion();
            updateProgressBar();
            
            // Initialize dark mode based on system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
                updateToggleText(true);
            } else {
                updateToggleText(false);
            }
            
            // Event listeners
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            reviewBtn.addEventListener('click', showIncorrectQuestions);
            darkModeToggle.addEventListener('change', toggleDarkMode);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDarkMode = darkModeToggle.checked;
            document.body.classList.toggle('dark-mode', isDarkMode);
            updateToggleText(isDarkMode);
        }

        // Update toggle text opacity
        function updateToggleText(isDarkMode) {
            if (isDarkMode) {
                lightText.style.opacity = '0.5';
                darkText.style.opacity = '1';
            } else {
                lightText.style.opacity = '1';
                darkText.style.opacity = '0.5';
            }
        }

        // Show current question
        function showQuestion() {
            currentQuestionEl.textContent = currentQuestion + 1;
            scoreEl.textContent = score;
            
            const question = quizData[currentQuestion];
            let optionsHTML = '';
            
            question.options.forEach((option, index) => {
                let optionClass = 'option';
                if (userAnswers[currentQuestion] === index) {
                    optionClass += ' selected';
                    if (index === question.answer) {
                        optionClass += ' correct';
                    } else {
                        optionClass += ' incorrect';
                    }
                }
                
                optionsHTML += `
                    <div class="${optionClass}" data-index="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </div>
                `;
            });
            
            let feedbackHTML = '';
            if (userAnswers[currentQuestion] !== null) {
                const isCorrect = userAnswers[currentQuestion] === question.answer;
                feedbackHTML = `
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                        ${isCorrect ? '✓ Correct!' : '✗ Incorrect!'} 
                        ${!isCorrect ? `Correct answer: ${String.fromCharCode(65 + question.answer)}) ${question.options[question.answer]}` : ''}
                        <br><br>Explanation: ${question.explanation}
                    </div>
                `;
            }
            
            quizContainer.innerHTML = `
                <div class="question">
                    <div class="question-number">Question ${currentQuestion + 1}/${quizData.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">${optionsHTML}</div>
                    ${feedbackHTML}
                </div>
            `;
            
            // Add event listeners to options
            const optionElements = quizContainer.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === quizData.length - 1 ? 'Finish Quiz' : 'Next';
        }

        // Select an option
        function selectOption(e) {
            if (userAnswers[currentQuestion] !== null) return; // Already answered
            
            const selectedOption = e.currentTarget;
            const selectedIndex = parseInt(selectedOption.dataset.index);
            
            userAnswers[currentQuestion] = selectedIndex;
            
            // Check if answer is correct
            if (selectedIndex === quizData[currentQuestion].answer) {
                score++;
                scoreEl.textContent = score;
            } else {
                // Add to incorrect questions list
                incorrectQuestions.push({
                    question: quizData[currentQuestion].question,
                    userAnswer: selectedIndex,
                    correctAnswer: quizData[currentQuestion].answer,
                    options: quizData[currentQuestion].options,
                    explanation: quizData[currentQuestion].explanation,
                    questionNumber: currentQuestion + 1
                });
            }
            
            showQuestion();
            updateProgressBar();
        }

        // Show next question
        function showNextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show results
        function showResults() {
            quizContainer.style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.stats').style.display = 'none';
            
            finalScoreEl.textContent = score;
            
            // Performance message
            const percentage = (score / quizData.length) * 100;
            let message = '';
            if (percentage >= 80) {
                message = 'Excellent! You have a strong understanding of Electrotherapy 1 (Interferential Current).';
            } else if (percentage >= 60) {
                message = 'Good job! You have a solid grasp of the material.';
            } else if (percentage >= 40) {
                message = 'Not bad! Review the material and try again.';
            } else {
                message = 'Keep studying! Review the lectures and try again.';
            }
            
            performanceMessageEl.textContent = message;
            resultsContainer.style.display = 'block';
            
            // Show review button only if there are incorrect answers
            if (incorrectQuestions.length > 0) {
                reviewBtn.style.display = 'inline-block';
            } else {
                reviewBtn.style.display = 'none';
            }
        }

        // Show incorrect questions
        function showIncorrectQuestions() {
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'block';
            
            let incorrectHTML = '';
            incorrectQuestions.forEach((item, index) => {
                incorrectHTML += `
                    <div class="review-question">
                        <div class="review-question-number">Question ${item.questionNumber}</div>
                        <div class="review-question-text">${item.question}</div>
                        <div>Your answer: ${String.fromCharCode(65 + item.userAnswer)}) ${item.options[item.userAnswer]}</div>
                        <div class="review-answer review-correct">Correct answer: ${String.fromCharCode(65 + item.correctAnswer)}) ${item.options[item.correctAnswer]}</div>
                        <div class="review-explanation">${item.explanation}</div>
                    </div>
                `;
            });
            
            incorrectQuestionsList.innerHTML = incorrectHTML;
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            incorrectQuestions = [];
            
            quizContainer.style.display = 'block';
            document.querySelector('.navigation').style.display = 'flex';
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.stats').style.display = 'flex';
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'none';
            
            showQuestion();
            updateProgressBar();
        }

        // Initialize the quiz when the page loads
        window.onload = initQuiz;
    </script>
</body>
</html>